#### 19.03.12
#### 19.03.18

## 개요
웹 서버, WAS, CGI, WSGI에 대한 이해를 통해 (파이썬)웹 서버의 구조를 이해해보자


## 웹 서버
- 클라이언트(웹 브라우저)의 HTTP 요청 받아서 정적 자원(HTML 등)을 반환하는 하드웨어나 소프트웨어
- 동적 자원을 위한 요청이 들어올 경우 그 요청을 WAS에 전달하고 응답을 반환하는 프록시 서버와 같이 기능

## CGI(Common Gateway Interface)
- 웹서버와 요청 처리하는 프로그램간 통신 규약 중 하나
- 약속되어있는 형태의 데이터를 환경변수라는 이름으로 전달
- 프로그래밍 언어 중 환경변수나 표준 입출력을 다룰 수있는 언어는 모두 사용 가능(과거에 주로 C, Perl, PHP)
- 전통적인 CGI방식은 클라이언트 요청시 마다 개별 프로세스 생성해 응답
    - 개별 프로세스의 생성은 시스템에 부하주는 요인
- 전통적 CGI 방식의 대안 기술 등장
    - 1) 웹서버에 스크립트 엔진(인터프리터) 내장
    - 2) 웹서버의 요청을 데몬프로그램에서 처리
        - WAS(애플리케이션 전용 데몬) 방식으로 발전

## WAS(Web Application Sever)
- 프로그래밍 언어를 읽고 처리하여 동적 자원을 반환
- 클라이언트의 다양한 요구에 맞춰 동작하는 웹을 제공
- 정적 자원의 경우는 앞의 웹 서버 단에서 처리하여 서버를 효율적으로 운영가능
- 웹서버와 WAS의 분리로인해 각각의 역할을 전문화하는 방향으로 발전

## WSGI(Web Server Gateway Interface)
- 파이썬 웹 어플리케이션이 웹 서버와 통신하기 위한 인터페이스이자 일종의 프로토콜
- WSGI 기술을 이용하여 CGI 처리를 발전된 형태로 실행
- 웹서버와 WAS를 잇는 미들웨어의 역할


## 파이썬 웹 아키텍쳐
<br>

![pythonWebA](https://user-images.githubusercontent.com/38183218/54207280-39f16400-451d-11e9-8fad-cb02e8bb3b22.png)

위 구조에서 Reverse Proxy Sever가 앞서 말한 의미의 웹 서버이고 정적 자원의 빠른 반환, 동적 자원 요청의 전달을 담당한다. 

다음으로 WSGI WAS는 WSGI 규약에 맞게 구현된 WAS로써 웹 서버와 파이썬 웹 어플리케이션을 잇는 미들웨어로 기능한다. 구체적으로, 요청이 들어오면 WSGI는 서버단의 환경정보와 콜백함수를 어플리케이션단에 제공한다. 어플리케이션은 그 요청을 처리하고 제공된 콜백함수를 통해 서버에 응답한다.

마지막으로 WSGI 웹 어플리케이션은 실제로 환경정보와 request 인수를 받아서 response를 출력하는 함수들의 집합이다. 웹 서비스의 각 URL이 함수들에 일대일 매핑되어 요청을 받을때마다 해당 함수를 호출하게 된다. 

웹 프레임워크는 사용자 프로그램과 저수준의 웹 라이브러리 중간에 위치하여 웹 서버의 개발을 좀 더 편리하게 해주면서, 표준 라이브러리의 기능을 확장해주는 역할을 한다.

일반적으로 웹 프레임워크를 사용한 웹 어플리케이션의 개발시에는 ORM을 이용하여 DB 처리를 용이하게하며, Template Engine의 사용으로 데이터 요소를 포함하는 html 파일을 동적으로 생성한다.

